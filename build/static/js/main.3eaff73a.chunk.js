(this["webpackJsonpstrangers-things"]=this["webpackJsonpstrangers-things"]||[]).push([[0],{30:function(e,t,n){"use strict";n.r(t);var r=n(1),c=n(17),s=n.n(c),a=n(10),u=n(6),o=n(3),i=n(2),j=n(5),p="https://strangers-things.herokuapp.com/api/2204-FTB-MT-WEB-PT/",b=function(){var e=Object(j.a)(Object(i.a)().mark((function e(t){var n,r,c,s,a,u=arguments;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=u.length>1&&void 0!==u[1]?u[1]:"GET",r=u.length>2?u[2]:void 0,c=u.length>3?u[3]:void 0,s=!1,e.prev=4,e.next=7,fetch(p+t,O(l(n,c),r));case 7:return a=e.sent,e.next=10,a.json();case 10:if(!(s=e.sent).error){e.next=13;break}throw s.error;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(4),console.error(e.t0);case 18:return e.abrupt("return",s);case 19:case"end":return e.stop()}}),e,null,[[4,15]])})));return function(t){return e.apply(this,arguments)}}(),l=function(e,t){return{method:e.toUpperCase(),body:JSON.stringify(t)}},O=function(e,t){return t?Object.assign(e,{headers:Object.assign(e.headers,{Authorization:"Bearer ".concat(t)})}):e},d=function(){var e=Object(j.a)(Object(i.a)().mark((function e(t){var n;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b("/posts","GET",t);case 2:if((n=e.sent)&&n.data){e.next=5;break}return e.abrupt("return",[]);case 5:return e.abrupt("return",n.data.posts||[]);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),f=function(){var e=Object(j.a)(Object(i.a)().mark((function e(t,n){var r;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b("/users/login","POST",null,{guest:{username:t,password:n}});case 2:return r=e.sent,e.abrupt("return",{user:r.data.guest,token:r.data.token});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),h=function(){var e=Object(j.a)(Object(i.a)().mark((function e(t,n){var r;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b("/users/register","POST",null,{guest:{username:t,password:n}});case 2:return r=e.sent,e.abrupt("return",{user:r.data.guest,token:r.data.token});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),x=function(){var e=Object(j.a)(Object(i.a)().mark((function e(t,n,r){var c;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b("/posts/".concat(r,"/comments"),"POST",t,{comment:{content:n},guest:{token:t}});case 2:return c=e.sent,console.log("comment?",c),e.abrupt("return",c);case 5:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),m=function(){var e=Object(j.a)(Object(i.a)().mark((function e(t,n,r,c,s){var a;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b("/posts","POST",t,{post:{description:r,location:n,price:c,title:s}});case 2:return e.sent,e.next=5,d(t);case 5:return a=e.sent,e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})));return function(t,n,r,c,s){return e.apply(this,arguments)}}(),v=function(){var e=Object(j.a)(Object(i.a)().mark((function e(t,n){var r;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b("/posts/".concat(n),"DELETE",t);case 2:return r=e.sent,e.abrupt("return",r.success);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),g=n(0),k=function(e){var t,n=e.user,c=e.token,s=e.posts,a=e.setPosts,p=e.featuredPost,b=e.setFeaturedPost,l=Object(r.useState)(""),O=Object(u.a)(l,2),f=O[0],h=O[1],m=Object(o.e)(),k=(Object(o.f)().postId,function(){b(!1),m.push("/posts")}),w=function(){var e=Object(j.a)(Object(i.a)().mark((function e(t){var n;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,x(c,f,p.id);case 3:return e.sent,e.next=6,d(c);case 6:n=e.sent,a(n),b(n.find((function(e){return e.id==p.id})));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y=function(){var e=Object(j.a)(Object(i.a)().mark((function e(t,n){var r;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.stopPropagation(),!window.confirm("Are you sure?")){e.next=6;break}return e.next=4,v(c,n);case 4:e.sent&&(k(),r=s.filter((function(e){return e.id!=n})),a(r));case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();return Object(g.jsxs)("article",{className:"featured-post",children:[Object(g.jsx)("h1",{children:p.title}),Object(g.jsx)("p",{children:p.location}),Object(g.jsx)("p",{children:p.description}),Object(g.jsx)("p",{children:p.price}),Object(g.jsxs)("p",{children:["Posted by: ",null===p||void 0===p||null===(t=p.guest)||void 0===t?void 0:t.username]}),Object(g.jsxs)("section",{children:[Object(g.jsx)("h2",{children:"Comments"}),Object(g.jsx)("ul",{children:p.comments.map((function(e){return Object(g.jsx)("li",{children:Object(g.jsxs)("span",{children:[e.content," posted by: ",e.guest.username]})},e.id)}))})]}),Object(g.jsxs)("form",{onSubmit:w,children:[Object(g.jsx)("input",{onChange:function(e){return h(e.target.value)},type:"text",name:"comment",placeholder:"comment",value:f}),Object(g.jsx)("button",{type:"submit",children:"Submit Comment"})]}),Object(g.jsx)("section",{}),Object(g.jsx)("button",{onClick:k,children:"Close"}),n&&c&&p.guestId==n.id&&Object(g.jsx)("button",{onClick:function(e){y(e,p.id)},children:"Delete "})]})},w=function(e){var t=e.user,n=e.setUser,c=e.token,s=e.setToken,a=Object(r.useState)(""),o=Object(u.a)(a,2),p=o[0],b=o[1],l=Object(r.useState)(""),O=Object(u.a)(l,2),d=O[0],x=O[1],m=Object(r.useState)(!1),v=Object(u.a)(m,2),k=v[0],w=v[1],y=function(){var e=Object(j.a)(Object(i.a)().mark((function e(t){var r,c,a,u,o,j;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!k){e.next=11;break}return e.next=4,h(p,d);case 4:r=e.sent,c=r.user,a=r.token,n(c),s(a),e.next=18;break;case 11:return e.next=13,f(p,d);case 13:u=e.sent,o=u.user,j=u.token,n(o),s(j);case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(g.jsx)(g.Fragment,{children:t&&c?Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)("h1",{children:"Profile"}),Object(g.jsxs)("p",{children:[t.username," is logged in"]}),Object(g.jsx)("button",{onClick:function(){n(!1),s("")},children:"Logout"})]}):Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)("h1",{children:k?"Registration":"Login"}),Object(g.jsxs)("form",{onSubmit:y,children:[Object(g.jsx)("input",{onChange:function(e){return b(e.target.value)},required:!0,name:"username",type:"text",placeholder:"username",value:p}),Object(g.jsx)("input",{onChange:function(e){return x(e.target.value)},required:!0,name:"password",type:"password",placeholder:"password",value:d}),Object(g.jsx)("button",{type:"submit",children:"Submit"})]}),Object(g.jsx)("button",{onClick:function(){w(!k)},children:"Register/Login"})]})})},y=function(){return Object(g.jsxs)("div",{children:["Home Page",Object(g.jsx)("p",{children:"Log in tho get started"})]})},P=function(e){var t=e.user,n=e.token,c=e.posts,s=e.setPosts,a=e.setFeaturedPost,p=Object(r.useState)(""),b=Object(u.a)(p,2),l=b[0],O=b[1],f=Object(r.useState)(""),h=Object(u.a)(f,2),x=h[0],k=h[1],w=Object(r.useState)(""),y=Object(u.a)(w,2),P=y[0],S=y[1],C=Object(r.useState)(""),T=Object(u.a)(C,2),F=T[0],E=T[1],L=Object(r.useState)(""),D=Object(u.a)(L,2),I=D[0],B=D[1],A=Object(o.e)();Object(r.useEffect)((function(){return Object(j.a)(Object(i.a)().mark((function e(){return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=s,e.next=3,d(n);case 3:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1));case 5:case"end":return e.stop()}}),e)})))()}),[]);var J=function(){var e=Object(j.a)(Object(i.a)().mark((function e(t){var r;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,m(n,P,x,I,F);case 3:r=e.sent,s(r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),U=function(){var e=Object(j.a)(Object(i.a)().mark((function e(t,r){var a;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.stopPropagation(),!window.confirm("Are you sure?")){e.next=6;break}return e.next=4,v(n,r);case 4:e.sent&&(a=c.filter((function(e){return e.id!=r})),s(a));case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();return Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)("h1",{children:"Posts"}),Object(g.jsx)("input",{onChange:function(e){return O(e.target.value)},type:"text",name:"search",placeholder:"search"}),t&&n&&Object(g.jsxs)("form",{onSubmit:J,children:[Object(g.jsx)("input",{onChange:function(e){return B(e.target.value)},type:"text",name:"title",placeholder:"title",value:I}),Object(g.jsx)("input",{onChange:function(e){return E(e.target.value)},type:"text",name:"price",placeholder:"price",value:F}),Object(g.jsx)("input",{onChange:function(e){return S(e.target.value)},type:"text",name:"location",placeholder:"location",value:P}),Object(g.jsx)("input",{onChange:function(e){return k(e.target.value)},type:"text",name:"description",placeholder:"description",value:x}),Object(g.jsx)("button",{type:"submit",children:"Submit Posts"})]}),Object(g.jsx)("section",{children:c.filter((function(e){return function(e){return"".concat(e.location," ").concat(e.description," ").concat(e.title," ").concat(e.price).toLowerCase().includes(l.toLowerCase())}(e)})).map((function(e){return Object(g.jsxs)("div",{onClick:function(r){!function(e,r){t&&n?(a(r),A.push("/posts/".concat(r.id))):alert("not logged in")}(0,e)},children:[Object(g.jsx)("h3",{children:e.title}),Object(g.jsx)("p",{children:e.location}),Object(g.jsx)("p",{children:e.description}),Object(g.jsx)("p",{children:e.price}),t&&n&&e.guestId==t.id&&Object(g.jsx)("button",{onClick:function(t){return U(t,e.id)},children:"Delete"})]},e.id)}))})]})},S=function(){var e=Object(r.useState)([]),t=Object(u.a)(e,2),n=t[0],c=t[1],s=Object(r.useState)(!1),i=Object(u.a)(s,2),j=i[0],p=i[1],b=Object(r.useState)(!1),l=Object(u.a)(b,2),O=(l[0],l[1],Object(r.useState)(!1)),d=Object(u.a)(O,2),f=d[0],h=d[1],x=Object(r.useState)(""),m=Object(u.a)(x,2),v=m[0],S=m[1];return Object(g.jsxs)("main",{children:[Object(g.jsxs)("nav",{children:[Object(g.jsx)(a.b,{exact:!0,to:"/",children:"Home"}),Object(g.jsx)(a.b,{to:"/posts",children:"Posts"}),Object(g.jsx)(a.b,{to:"/profile",children:"Profile"})]}),Object(g.jsx)(o.a,{exact:!0,path:"/",children:Object(g.jsx)(y,{user:f})}),Object(g.jsxs)(o.a,{path:"/posts",children:[Object(g.jsx)(o.a,{path:"/posts/:postId",children:f&&v&&j&&Object(g.jsx)(k,{user:f,token:v,posts:n,setPosts:c,featuredPost:j,setFeaturedPost:p})}),Object(g.jsx)(P,{user:f,token:v,featuredPost:j,setFeaturedPost:p,posts:n,setPosts:c})]}),Object(g.jsx)(o.a,{path:"/profile",children:Object(g.jsx)(w,{user:f,setUser:h,token:v,setToken:S})})]})};s.a.render(Object(g.jsx)(a.a,{children:Object(g.jsx)(S,{})}),document.getElementById("app"))}},[[30,1,2]]]);
//# sourceMappingURL=main.3eaff73a.chunk.js.map
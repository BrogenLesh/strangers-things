{"ast":null,"code":"import _regeneratorRuntime from\"D:/vscode project/Course Work/strangers-things/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"D:/vscode project/Course Work/strangers-things/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"D:/vscode project/Course Work/strangers-things/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from\"react\";import{loginUser,registerUser}from\"./utility\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var profile=function profile(_ref){var user=_ref.user,setUser=_ref.setUser,token=_ref.token,setToken=_ref.setToken;var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),username=_useState2[0],setUsername=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPassword=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),isRegistering=_useState6[0],setIsRegistering=_useState6[1];var handleSubmit=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(e){var _yield$registerUser,_user,_token,_yield$loginUser,_user2,_token2;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();if(!isRegistering){_context.next=11;break;}_context.next=4;return registerUser(username,password);case 4:_yield$registerUser=_context.sent;_user=_yield$registerUser.user;_token=_yield$registerUser.token;setUser(_user);setToken(_token);_context.next=18;break;case 11:_context.next=13;return loginUser(username,password);case 13:_yield$loginUser=_context.sent;_user2=_yield$loginUser.user;_token2=_yield$loginUser.token;setUser(_user2);setToken(_token2);case 18:case\"end\":return _context.stop();}}},_callee);}));return function handleSubmit(_x){return _ref2.apply(this,arguments);};}();var handleLogout=function handleLogout(){setUser(false);setToken(\"\");};var toggleRegistration=function toggleRegistration(){setIsRegistering(!isRegistering);};return/*#__PURE__*/_jsx(_Fragment,{children:user&&token?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Profile\"}),/*#__PURE__*/_jsxs(\"p\",{children:[user.username,\" is logged in\"]}),/*#__PURE__*/_jsx(\"button\",{onClick:handleLogout,children:\"Logout\"})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"h1\",{children:isRegistering?\"Registration\":\"Login\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"input\",{onChange:function onChange(event){return setUsername(event.target.value);},required:true,name:\"username\",type:\"text\",placeholder:\"username\",value:username}),/*#__PURE__*/_jsx(\"input\",{onChange:function onChange(event){return setPassword(event.target.value);},required:true,name:\"password\",type:\"password\",placeholder:\"password\",value:password}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Submit\"})]}),/*#__PURE__*/_jsx(\"button\",{onClick:toggleRegistration,children:\"Register/Login\"})]})});};export default profile;","map":{"version":3,"names":["React","useState","loginUser","registerUser","profile","user","setUser","token","setToken","username","setUsername","password","setPassword","isRegistering","setIsRegistering","handleSubmit","e","preventDefault","handleLogout","toggleRegistration","event","target","value"],"sources":["D:/vscode project/Course Work/strangers-things/src/components/profile.js"],"sourcesContent":["import React, { useState } from \"react\";\r\nimport { loginUser, registerUser } from \"./utility\";\r\n\r\nconst profile = ({ user, setUser, token, setToken }) => {\r\n    const [username, setUsername] = useState(\"\");\r\n    const [password, setPassword] = useState(\"\");\r\n    const [isRegistering, setIsRegistering] = useState(false);\r\n\r\n    const handleSubmit = async (e) => {\r\n        e.preventDefault();\r\n\r\n        if (isRegistering) {\r\n            const { user, token } = await registerUser(username, password);\r\n            setUser(user);\r\n            setToken(token);\r\n        } else {\r\n            const { user, token } = await loginUser(username, password);\r\n            setUser(user);\r\n            setToken(token);\r\n        }\r\n    };\r\n\r\n    const handleLogout = () => {\r\n        setUser(false);\r\n        setToken(\"\");\r\n    };\r\n\r\n    const toggleRegistration = () => {\r\n        setIsRegistering(!isRegistering);\r\n    };\r\n\r\n    return (\r\n        <>\r\n            {user && token ? (\r\n                <>\r\n                    <h1>Profile</h1>\r\n                    <p>{user.username} is logged in</p>\r\n                    <button onClick={handleLogout}>Logout</button>\r\n                </>\r\n            ) : (\r\n                <>\r\n                    <h1>{isRegistering ? \"Registration\" : \"Login\"}</h1>\r\n                    <form onSubmit={handleSubmit}>\r\n                        <input\r\n                            onChange={(event) =>\r\n                                setUsername(event.target.value)\r\n                            }\r\n                            required\r\n                            name=\"username\"\r\n                            type=\"text\"\r\n                            placeholder=\"username\"\r\n                            value={username}\r\n                        ></input>\r\n                        <input\r\n                            onChange={(event) =>\r\n                                setPassword(event.target.value)\r\n                            }\r\n                            required\r\n                            name=\"password\"\r\n                            type=\"password\"\r\n                            placeholder=\"password\"\r\n                            value={password}\r\n                        ></input>\r\n                        <button type=\"submit\">Submit</button>\r\n                    </form>\r\n                    <button onClick={toggleRegistration}>\r\n                        Register/Login \r\n                    </button>\r\n                </>\r\n            )}\r\n        </>\r\n    );\r\n};\r\n\r\nexport default profile;\r\n"],"mappings":"4ZAAA,MAAOA,MAAP,EAAgBC,QAAhB,KAAgC,OAAhC,CACA,OAASC,SAAT,CAAoBC,YAApB,KAAwC,WAAxC,C,6IAEA,GAAMC,QAAO,CAAG,QAAVA,QAAU,MAAwC,IAArCC,KAAqC,MAArCA,IAAqC,CAA/BC,OAA+B,MAA/BA,OAA+B,CAAtBC,KAAsB,MAAtBA,KAAsB,CAAfC,QAAe,MAAfA,QAAe,CACpD,cAAgCP,QAAQ,CAAC,EAAD,CAAxC,wCAAOQ,QAAP,eAAiBC,WAAjB,eACA,eAAgCT,QAAQ,CAAC,EAAD,CAAxC,yCAAOU,QAAP,eAAiBC,WAAjB,eACA,eAA0CX,QAAQ,CAAC,KAAD,CAAlD,yCAAOY,aAAP,eAAsBC,gBAAtB,eAEA,GAAMC,aAAY,6FAAG,iBAAOC,CAAP,yLACjBA,CAAC,CAACC,cAAF,GADiB,IAGbJ,aAHa,gDAIiBV,aAAY,CAACM,QAAD,CAAWE,QAAX,CAJ7B,0CAILN,KAJK,qBAILA,IAJK,CAICE,MAJD,qBAICA,KAJD,CAKbD,OAAO,CAACD,KAAD,CAAP,CACAG,QAAQ,CAACD,MAAD,CAAR,CANa,sDAQiBL,UAAS,CAACO,QAAD,CAAWE,QAAX,CAR1B,wCAQLN,MARK,kBAQLA,IARK,CAQCE,OARD,kBAQCA,KARD,CASbD,OAAO,CAACD,MAAD,CAAP,CACAG,QAAQ,CAACD,OAAD,CAAR,CAVa,uDAAH,kBAAZQ,aAAY,6CAAlB,CAcA,GAAMG,aAAY,CAAG,QAAfA,aAAe,EAAM,CACvBZ,OAAO,CAAC,KAAD,CAAP,CACAE,QAAQ,CAAC,EAAD,CAAR,CACH,CAHD,CAKA,GAAMW,mBAAkB,CAAG,QAArBA,mBAAqB,EAAM,CAC7BL,gBAAgB,CAAC,CAACD,aAAF,CAAhB,CACH,CAFD,CAIA,mBACI,yBACKR,IAAI,EAAIE,KAAR,cACG,wCACI,+BADJ,cAEI,qBAAIF,IAAI,CAACI,QAAT,mBAFJ,cAGI,eAAQ,OAAO,CAAES,YAAjB,oBAHJ,GADH,cAOG,wCACI,oBAAKL,aAAa,CAAG,cAAH,CAAoB,OAAtC,EADJ,cAEI,cAAM,QAAQ,CAAEE,YAAhB,wBACI,cACI,QAAQ,CAAE,kBAACK,KAAD,QACNV,YAAW,CAACU,KAAK,CAACC,MAAN,CAAaC,KAAd,CADL,EADd,CAII,QAAQ,KAJZ,CAKI,IAAI,CAAC,UALT,CAMI,IAAI,CAAC,MANT,CAOI,WAAW,CAAC,UAPhB,CAQI,KAAK,CAAEb,QARX,EADJ,cAWI,cACI,QAAQ,CAAE,kBAACW,KAAD,QACNR,YAAW,CAACQ,KAAK,CAACC,MAAN,CAAaC,KAAd,CADL,EADd,CAII,QAAQ,KAJZ,CAKI,IAAI,CAAC,UALT,CAMI,IAAI,CAAC,UANT,CAOI,WAAW,CAAC,UAPhB,CAQI,KAAK,CAAEX,QARX,EAXJ,cAqBI,eAAQ,IAAI,CAAC,QAAb,oBArBJ,GAFJ,cAyBI,eAAQ,OAAO,CAAEQ,kBAAjB,4BAzBJ,GARR,EADJ,CAyCH,CArED,CAuEA,cAAef,QAAf"},"metadata":{},"sourceType":"module"}
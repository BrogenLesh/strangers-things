{"ast":null,"code":"import _regeneratorRuntime from\"D:/vscode project/Course Work/strangers-things/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"D:/vscode project/Course Work/strangers-things/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"D:/vscode project/Course Work/strangers-things/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from\"react\";import{Link,useHistory}from\"react-router-dom\";import{fetchPosts,submitPost,deletePost}from\"./utility\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Posts=function Posts(_ref){var user=_ref.user,token=_ref.token,posts=_ref.posts,setPosts=_ref.setPosts,setFeaturedPost=_ref.setFeaturedPost;var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),search=_useState2[0],setSearch=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),description=_useState4[0],setDescription=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),location=_useState6[0],setLocation=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),price=_useState8[0],setPrice=_useState8[1];var _useState9=useState(\"\"),_useState10=_slicedToArray(_useState9,2),title=_useState10[0],setTitle=_useState10[1];var history=useHistory();useEffect(function(){return _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.t0=setPosts;_context.next=3;return fetchPosts(token);case 3:_context.t1=_context.sent;return _context.abrupt(\"return\",(0,_context.t0)(_context.t1));case 5:case\"end\":return _context.stop();}}},_callee);}))();},[]);var searchMatches=function searchMatches(post){return\"\".concat(post.location,\" \").concat(post.description,\" \").concat(post.title,\" \").concat(post.price).toLowerCase().includes(search.toLowerCase());};var handlePostClick=function handlePostClick(e,post){if(user&&token){setFeaturedPost(post);history.push(\"/posts/\".concat(post.id));}else{alert(\"not logged in\");}};var handleSubmitPost=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(event){var newPosts;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:event.preventDefault();_context2.next=3;return submitPost(token,location,description,title,price);case 3:newPosts=_context2.sent;setPosts(newPosts);case 5:case\"end\":return _context2.stop();}}},_callee2);}));return function handleSubmitPost(_x){return _ref3.apply(this,arguments);};}();var handleDeletePost=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(e,postId){var isDeleted,remainingPosts;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:e.stopPropagation();if(!window.confirm(\"Are you sure?\")){_context3.next=6;break;}_context3.next=4;return deletePost(token,postId);case 4:isDeleted=_context3.sent;if(isDeleted){remainingPosts=posts.filter(function(vc){return vc.id!=postId;});setPosts(remainingPosts);}case 6:case\"end\":return _context3.stop();}}},_callee3);}));return function handleDeletePost(_x2,_x3){return _ref4.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Posts\"}),/*#__PURE__*/_jsx(\"input\",{onChange:function onChange(e){return setSearch(e.target.value);},type:\"text\",name:\"search\",placeholder:\"search\"}),user&&token&&/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmitPost,children:[/*#__PURE__*/_jsx(\"input\",{onChange:function onChange(e){return setTitle(e.target.value);},type:\"text\",name:\"title\",placeholder:\"title\",value:title}),/*#__PURE__*/_jsx(\"input\",{onChange:function onChange(e){return setPrice(e.target.value);},type:\"text\",name:\"price\",placeholder:\"price\",value:price}),/*#__PURE__*/_jsx(\"input\",{onChange:function onChange(e){return setLocation(e.target.value);},type:\"text\",name:\"location\",placeholder:\"location\",value:location}),/*#__PURE__*/_jsx(\"input\",{onChange:function onChange(e){return setDescription(e.target.value);},type:\"text\",name:\"description\",placeholder:\"description\",value:description}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Submit Posts\"})]}),/*#__PURE__*/_jsx(\"section\",{children:posts.filter(function(post){return searchMatches(post);}).map(function(post){return/*#__PURE__*/_jsxs(\"div\",{onClick:function onClick(e){handlePostClick(e,post);},children:[/*#__PURE__*/_jsx(\"h3\",{children:post.title}),/*#__PURE__*/_jsx(\"p\",{children:post.location}),/*#__PURE__*/_jsx(\"p\",{children:post.description}),/*#__PURE__*/_jsx(\"p\",{children:post.price}),user&&token&&post.guestId==user.id&&/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(e){return handleDeletePost(e,post.id);},children:\"Delete\"})]},post.id);})})]});};export default Posts;/// fix vactions body css in line 83","map":{"version":3,"names":["React","useEffect","useState","Link","useHistory","fetchPosts","submitPost","deletePost","Posts","user","token","posts","setPosts","setFeaturedPost","search","setSearch","description","setDescription","location","setLocation","price","setPrice","title","setTitle","history","searchMatches","post","toLowerCase","includes","handlePostClick","e","push","id","alert","handleSubmitPost","event","preventDefault","newPosts","handleDeletePost","postId","stopPropagation","window","confirm","isDeleted","remainingPosts","filter","vc","target","value","map","guestId"],"sources":["D:/vscode project/Course Work/strangers-things/src/components/posts.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { Link, useHistory } from \"react-router-dom\";\r\nimport { fetchPosts, submitPost, deletePost } from \"./utility\";\r\n\r\nconst Posts = ({\r\n    user,\r\n    token,\r\n    posts,\r\n    setPosts,\r\n    setFeaturedPost,\r\n}) => {\r\n    const [search, setSearch] = useState(\"\");\r\n    const [description, setDescription] = useState(\"\");\r\n    const [location, setLocation] = useState(\"\");\r\n    const [price, setPrice] = useState(\"\");\r\n    const [title, setTitle] = useState(\"\");\r\n\r\n    const history = useHistory();\r\n\r\n    useEffect(() => (async () => setPosts(await fetchPosts(token)))(), []);\r\n\r\n    const searchMatches = (post) => {\r\n        return `${post.location} ${post.description} ${post.title} ${post.price}`\r\n            .toLowerCase()\r\n            .includes(search.toLowerCase());\r\n    };\r\n\r\n    const handlePostClick = (e, post) => {\r\n        if (user && token) {\r\n            setFeaturedPost(post);\r\n            history.push(`/posts/${post.id}`);\r\n        } else {\r\n            alert(\"not logged in\");\r\n        }\r\n    };\r\n\r\n    const handleSubmitPost = async (event) => {\r\n        event.preventDefault();\r\n        const newPosts = await submitPost(token, location, description, title, price);\r\n        setPosts(newPosts);\r\n    };\r\n\r\n    const handleDeletePost = async (e, postId) => {\r\n        e.stopPropagation();\r\n        if (window.confirm(\"Are you sure?\")) {\r\n            const isDeleted = await deletePost(token, postId);\r\n            if (isDeleted) {\r\n                const remainingPosts = posts.filter((vc) => vc.id != postId);\r\n                setPosts(remainingPosts);\r\n            }\r\n        }\r\n    };\r\n\r\n    return (\r\n        <>\r\n            <h1>Posts</h1>\r\n\r\n            <input\r\n                onChange={(e) => setSearch(e.target.value)}\r\n                type=\"text\"\r\n                name=\"search\"\r\n                placeholder=\"search\"\r\n            />\r\n\r\n            {user && token && (\r\n                <form onSubmit={handleSubmitPost}>\r\n                    <input\r\n                        onChange={(e) => setTitle(e.target.value)}\r\n                        type=\"text\"\r\n                        name=\"title\"\r\n                        placeholder=\"title\"\r\n                        value={title}\r\n                    />\r\n                    <input\r\n                        onChange={(e) => setPrice(e.target.value)}\r\n                        type=\"text\"\r\n                        name=\"price\"\r\n                        placeholder=\"price\"\r\n                        value={price}\r\n                    />\r\n                    <input\r\n                        onChange={(e) => setLocation(e.target.value)}\r\n                        type=\"text\"\r\n                        name=\"location\"\r\n                        placeholder=\"location\"\r\n                        value={location}\r\n                    />\r\n                    <input\r\n                        onChange={(e) => setDescription(e.target.value)}\r\n                        type=\"text\"\r\n                        name=\"description\"\r\n                        placeholder=\"description\"\r\n                        value={description}\r\n                    />\r\n                    <button type=\"submit\">Submit Posts</button>\r\n                </form>\r\n            )}\r\n\r\n            <section>\r\n                {posts\r\n                    .filter((post) => {\r\n                        return searchMatches(post);\r\n                    })\r\n                    .map((post) => {\r\n                        return (\r\n                            <div\r\n                                key={post.id}\r\n                                onClick={(e) => {\r\n                                    handlePostClick(e, post);\r\n                                }}\r\n                            >\r\n                                <h3>{post.title}</h3>\r\n                                <p>{post.location}</p>\r\n                                <p>{post.description}</p>\r\n                                <p>{post.price}</p>\r\n\r\n                                {user && token && post.guestId == user.id && (\r\n                                    <button\r\n                                        onClick={(e) =>\r\n                                            handleDeletePost(e, post.id)\r\n                                        }\r\n                                    >\r\n                                        Delete\r\n                                    </button>\r\n                                )}\r\n                            </div>\r\n                        );\r\n                    })}\r\n            </section>\r\n        </>\r\n    );\r\n};\r\n\r\nexport default Posts;\r\n\r\n/// fix vactions body css in line 83\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}
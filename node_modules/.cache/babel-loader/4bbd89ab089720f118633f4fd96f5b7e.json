{"ast":null,"code":"const STRANGER_THINGS_API_URL = \"https://strangers-things.herokuapp.com/api/2204-FTB-MT-WEB-PT/\";\nexport const apiCall = async function (url) {\n  let method = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : \"GET\";\n  let token = arguments.length > 2 ? arguments[2] : undefined;\n  let body = arguments.length > 3 ? arguments[3] : undefined;\n  let data = false;\n\n  try {\n    const response = await fetch(STRANGER_THINGS_API_URL + url, setToken(getFetchOptions(method, body), token));\n    data = await response.json();\n\n    if (data.error) {\n      throw data.error;\n    }\n  } catch (e) {\n    console.error(e);\n  }\n\n  return data;\n};\n\nconst getFetchOptions = (method, body) => {\n  return {\n    method: method.toUpperCase(),\n    body: JSON.stringify(body)\n  };\n};\n\nconst setToken = (body, token) => {\n  return token ? Object.assign(body, {\n    headers: Object.assign(body.headers, {\n      Authorization: `Bearer ${token}`\n    })\n  }) : body;\n}; //helper functions for api use\n\n\nexport const fetchPosts = async token => {\n  const data = await apiCall('/posts', 'GET', token);\n\n  if (!data || !data.data) {\n    return [];\n  }\n\n  return data.data.posts || [];\n};\nexport const loginUser = async (username, password) => {\n  const login = await apiCall(\"users/login\", \"POST\", null, {\n    user: {\n      username,\n      password\n    }\n  });\n  return {\n    user: login.data.user,\n    token: login.data.token\n  };\n};\nexport const registerUser = async (username, password) => {\n  console.log(username, passw);\n  const registration = await apiCall(\"users/register\", \"POST\", null, {\n    user: {\n      username,\n      password\n    }\n  });\n  return {\n    user: registration.data.user,\n    token: registration.data.token\n  };\n};","map":{"version":3,"names":["STRANGER_THINGS_API_URL","apiCall","url","method","token","body","data","response","fetch","setToken","getFetchOptions","json","error","e","console","toUpperCase","JSON","stringify","Object","assign","headers","Authorization","fetchPosts","posts","loginUser","username","password","login","user","registerUser","log","passw","registration"],"sources":["D:/vscode project/Course Work/strangers-things/src/components/utility.js"],"sourcesContent":["const STRANGER_THINGS_API_URL =\r\n    \"https://strangers-things.herokuapp.com/api/2204-FTB-MT-WEB-PT/\";\r\n\r\nexport const apiCall = async (url, method = \"GET\", token, body) => {\r\n    let data = false;\r\n    try {\r\n        const response = await fetch(\r\n            STRANGER_THINGS_API_URL + url,\r\n            setToken(getFetchOptions(method, body), token)\r\n        );\r\n        data = await response.json();\r\n\r\n        if (data.error) {\r\n            throw data.error;\r\n        }\r\n    } catch (e) {\r\n        console.error(e);\r\n    }\r\n\r\n    return data;\r\n};\r\n\r\nconst getFetchOptions = (method, body) => {\r\n    return {\r\n        method: method.toUpperCase(),\r\n        body: JSON.stringify(body),\r\n    };\r\n};\r\n\r\nconst setToken = (body, token) => {\r\n    return token\r\n        ? Object.assign(body, {\r\n            headers: Object.assign(body.headers, {\r\n                Authorization: `Bearer ${token}`,\r\n            }),\r\n        })\r\n        : body;\r\n};\r\n\r\n\r\n//helper functions for api use\r\n\r\nexport const fetchPosts = async (token) => {\r\n    const data = await apiCall('/posts', 'GET', token)\r\n    if (!data || !data.data) {\r\n      return []\r\n    }\r\n  \r\n    return data.data.posts || [];\r\n  }\r\n  \r\n\r\n  \r\n  export const loginUser = async(username, password) => {\r\n    const login = await apiCall(\"users/login\", \"POST\", null, {\r\n      user: {username, password}\r\n    })\r\n  \r\n    return {\r\n      user: login.data.user, \r\n      token: login.data.token\r\n    };\r\n  }\r\n  \r\n  export const registerUser = async(username, password) => {\r\n    console.log(username,passw)\r\n    const registration = await apiCall(\"users/register\", \"POST\", null, {\r\n      user: {username, password}\r\n    })\r\n  \r\n    return {\r\n      user: registration.data.user, \r\n      token: registration.data.token\r\n    };\r\n  }\r\n  \r\n\r\n  \r\n\r\n  \r\n  \r\n  \r\n"],"mappings":"AAAA,MAAMA,uBAAuB,GACzB,gEADJ;AAGA,OAAO,MAAMC,OAAO,GAAG,gBAAOC,GAAP,EAA4C;EAAA,IAAhCC,MAAgC,uEAAvB,KAAuB;EAAA,IAAhBC,KAAgB;EAAA,IAATC,IAAS;EAC/D,IAAIC,IAAI,GAAG,KAAX;;EACA,IAAI;IACA,MAAMC,QAAQ,GAAG,MAAMC,KAAK,CACxBR,uBAAuB,GAAGE,GADF,EAExBO,QAAQ,CAACC,eAAe,CAACP,MAAD,EAASE,IAAT,CAAhB,EAAgCD,KAAhC,CAFgB,CAA5B;IAIAE,IAAI,GAAG,MAAMC,QAAQ,CAACI,IAAT,EAAb;;IAEA,IAAIL,IAAI,CAACM,KAAT,EAAgB;MACZ,MAAMN,IAAI,CAACM,KAAX;IACH;EACJ,CAVD,CAUE,OAAOC,CAAP,EAAU;IACRC,OAAO,CAACF,KAAR,CAAcC,CAAd;EACH;;EAED,OAAOP,IAAP;AACH,CAjBM;;AAmBP,MAAMI,eAAe,GAAG,CAACP,MAAD,EAASE,IAAT,KAAkB;EACtC,OAAO;IACHF,MAAM,EAAEA,MAAM,CAACY,WAAP,EADL;IAEHV,IAAI,EAAEW,IAAI,CAACC,SAAL,CAAeZ,IAAf;EAFH,CAAP;AAIH,CALD;;AAOA,MAAMI,QAAQ,GAAG,CAACJ,IAAD,EAAOD,KAAP,KAAiB;EAC9B,OAAOA,KAAK,GACNc,MAAM,CAACC,MAAP,CAAcd,IAAd,EAAoB;IAClBe,OAAO,EAAEF,MAAM,CAACC,MAAP,CAAcd,IAAI,CAACe,OAAnB,EAA4B;MACjCC,aAAa,EAAG,UAASjB,KAAM;IADE,CAA5B;EADS,CAApB,CADM,GAMNC,IANN;AAOH,CARD,C,CAWA;;;AAEA,OAAO,MAAMiB,UAAU,GAAG,MAAOlB,KAAP,IAAiB;EACvC,MAAME,IAAI,GAAG,MAAML,OAAO,CAAC,QAAD,EAAW,KAAX,EAAkBG,KAAlB,CAA1B;;EACA,IAAI,CAACE,IAAD,IAAS,CAACA,IAAI,CAACA,IAAnB,EAAyB;IACvB,OAAO,EAAP;EACD;;EAED,OAAOA,IAAI,CAACA,IAAL,CAAUiB,KAAV,IAAmB,EAA1B;AACD,CAPI;AAWL,OAAO,MAAMC,SAAS,GAAG,OAAMC,QAAN,EAAgBC,QAAhB,KAA6B;EACpD,MAAMC,KAAK,GAAG,MAAM1B,OAAO,CAAC,aAAD,EAAgB,MAAhB,EAAwB,IAAxB,EAA8B;IACvD2B,IAAI,EAAE;MAACH,QAAD;MAAWC;IAAX;EADiD,CAA9B,CAA3B;EAIA,OAAO;IACLE,IAAI,EAAED,KAAK,CAACrB,IAAN,CAAWsB,IADZ;IAELxB,KAAK,EAAEuB,KAAK,CAACrB,IAAN,CAAWF;EAFb,CAAP;AAID,CATM;AAWP,OAAO,MAAMyB,YAAY,GAAG,OAAMJ,QAAN,EAAgBC,QAAhB,KAA6B;EACvDZ,OAAO,CAACgB,GAAR,CAAYL,QAAZ,EAAqBM,KAArB;EACA,MAAMC,YAAY,GAAG,MAAM/B,OAAO,CAAC,gBAAD,EAAmB,MAAnB,EAA2B,IAA3B,EAAiC;IACjE2B,IAAI,EAAE;MAACH,QAAD;MAAWC;IAAX;EAD2D,CAAjC,CAAlC;EAIA,OAAO;IACLE,IAAI,EAAEI,YAAY,CAAC1B,IAAb,CAAkBsB,IADnB;IAELxB,KAAK,EAAE4B,YAAY,CAAC1B,IAAb,CAAkBF;EAFpB,CAAP;AAID,CAVM"},"metadata":{},"sourceType":"module"}